{% extends "layout.html" %} {% block left %}
<div class="rectangle">
  <div class="text-block-content-1">
    <!-- Problem content here -->
    <pre><code>
      {{text_data}}
    </code></pre>
  </div>

  <div id="explanationBlock" class="text-block-content-2">
    <!-- Explanation will be updated here -->
    <hr class="text-block-divider" />
  </div>
</div>
{% endblock %} {% block right %}
<div class="text-block-content-3">
  <iframe
    src="{{ url_for('my_flowchart') }}"
    style="width: 100%; height: 100%; border: none"
  ></iframe>
</div>
{% endblock %} {% block scripts %}
<script>
  window.addEventListener(
    'message',
    function (event) {
      // Check event.origin here if you want to restrict messages to a certain origin for security
      if (event.data.label) {
        var label = event.data.label;
        fetch('/explanations')
          .then(function (response) {
            return response.json();
          })
          .then(function (data) {
            var explanation = data[label];
            if (explanation) {
              document.getElementById('explanationBlock').innerText =
                explanation;
            } else {
              console.log('No explanation found for this topic.');
            }
          })
          .catch(function (error) {
            console.error('Error:', error);
          });
      }
    },
    false
  );
</script>
{% endblock %}
